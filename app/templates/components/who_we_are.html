{% set participants = [] %}
{% try %}
    {% with open('app/data/participants.json', 'r', encoding='utf-8') as f %}
        {% set participants = f.read() | from_json %}
    {% endwith %}
{% except %}
    {# –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ #}
    {% set participants = [
        {
            'id': '1',
            'name': 'üë®‚Äçü¶∞ –ú–∞—Å—Å–∞–∂–∏—Å—Ç –∏–∑ –®–≤–µ–π—Ü–∞—Ä–∏–∏',
            'text': '¬´–Ø –∫–∞—Å–∞–ª—Å—è —Å–æ—Ç–µ–Ω —Ç–µ–ª, –Ω–æ –Ω–µ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å–≤–æ–µ–≥–æ¬ª',
            'story': '–†–∞–±–æ—Ç–∞—é —Ä—É–∫–∞–º–∏, –¥–µ—Ä–∂—É, —Å–Ω–∏–º–∞—é –±–æ–ª—å. –í—Å–µ –¥—É–º–∞—é—Ç, —á—Ç–æ —è —É—Ä–∞–≤–Ω–æ–≤–µ—à–µ–Ω–Ω—ã–π –∏ —Å–ø–æ–∫–æ–π–Ω—ã–π. –ê –≤–Ω—É—Ç—Ä–∏ ‚Äî –ø—É—Å—Ç–æ—Ç–∞ –∏ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ.\n\n–ü—É—Ç—å —Å—Ç–∞–ª –ø–µ—Ä–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º, –≥–¥–µ –∫—Ç–æ-—Ç–æ —É–≤–∏–¥–µ–ª –º–µ–Ω—è, –Ω–µ –∫–∞–∫ –ø—Ä–æ—Ñ–∏, –∞ –∫–∞–∫ –º—É–∂—á–∏–Ω—É. –ì–¥–µ –Ω–µ –Ω–∞–¥–æ –±—ã–ª–æ –¥–æ–∫–∞–∑—ã–≤–∞—Ç—å.\n\n–°–µ–π—á–∞—Å —è —á—É–≤—Å—Ç–≤—É—é —Å–≤–æ—ë —Ç–µ–ª–æ. –ò –¥–∞—é –Ω–µ –∏–∑ –¥–æ–ª–≥–∞, –∞ –∏–∑ –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏.',
            'photo': 'img/character/character_1.png'
        },
        {
            'id': '2',
            'name': 'üë©‚Äçü¶≥ –ñ–µ–Ω—â–∏–Ω–∞ –∏–∑ –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω—ã',
            'text': '¬´–Ø –¥–æ–º–∞. –°—Ä–µ–¥–∏ —Ç–µ—Ö, –∫—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç –∫–∞–∫ —è¬ª',
            'story': '–Ø –∂–∏–ª–∞ –≤ –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω–µ –∏ –¥—É–º–∞–ª–∞, —á—Ç–æ —Å–æ –º–Ω–æ–π —á—Ç–æ‚Äë—Ç–æ –Ω–µ —Ç–∞–∫. –í–æ–∫—Ä—É–≥ –±—ã–ª–∏ –ª—é–¥–∏, –Ω–æ —è –Ω–µ –º–æ–≥–ª–∞ –Ω–∞–π—Ç–∏ —Å–≤–æ–∏—Ö.\n\n–ù–∞ –ü—É—Ç–∏ —è –≤—Å—Ç—Ä–µ—Ç–∏–ª–∞ –∂–µ–Ω—â–∏–Ω, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª—ã—à–∞—Ç –±–µ–∑ —Å–ª–æ–≤. –ë–µ–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏. –ë–µ–∑ –∏–≥—Ä. –¢–æ–ª—å–∫–æ –≥–ª—É–±–∏–Ω–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞.\n\n–°–µ–π—á–∞—Å —É –º–µ–Ω—è –ø–æ–¥—Ä—É–≥–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –ú—ã –Ω–∞ –æ–¥–Ω–æ–π —á–∞—Å—Ç–æ—Ç–µ.',
            'photo': 'img/character/character_2.png'
        },
        {
            'id': '3',
            'name': 'üë®‚Äçü¶± –ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±—Ä–∞–ª—Å—è –∏–∑ —Ç—å–º—ã',
            'text': '¬´–ï—Å–ª–∏ —è –µ—â—ë –∂–∏–≤ ‚Äî –∑–Ω–∞—á–∏—Ç, –º–µ–Ω—è –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –æ—Å—Ç–∞–≤–∏–ª–∏¬ª',
            'story': '–° 20 –¥–æ 40 —è –∂–∏–ª –≤–æ —Ç—å–º–µ: –Ω–∞—Ä–∫–æ—Ç–∏–∫–∏, —Ç—é—Ä—å–º—ã, –ø—É—Å—Ç–æ—Ç–∞. –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –ø—ã—Ç–∞–ª—Å—è –≤—ã–±—Ä–∞—Ç—å—Å—è ‚Äî –ø–∞–¥–∞–ª —Å–Ω–æ–≤–∞. –í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç —è –ø–æ–Ω—è–ª: –µ—Å–ª–∏ —è –µ—â—ë –∂–∏–≤ ‚Äî –∑–Ω–∞—á–∏—Ç, –º–µ–Ω—è –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –æ—Å—Ç–∞–≤–∏–ª–∏.\n\n–í –û–°–ù–û–í–ï –ü–£–¢–ò —è –≤—Å—Ç—Ä–µ—Ç–∏–ª —Ç–µ—Ö, –∫—Ç–æ —Ç–æ–∂–µ –ø–∞–¥–∞–ª, –Ω–æ –Ω–µ —Å–ª–æ–º–∞–ª—Å—è. –ó–¥–µ—Å—å –Ω–µ —Å—É–¥—è—Ç, –Ω–µ –∂–∞–ª–µ—é—Ç, –∞ –¥–µ—Ä–∂–∞—Ç. –°–µ–π—á–∞—Å —è –Ω–µ –æ–¥–∏–Ω. –Ø –∏–¥—É —Å–≤–æ–π –ø—É—Ç—å ‚Äî –∏ –∑–Ω–∞—é, —Ä–∞–¥–∏ —á–µ–≥–æ –≤—Å—Ç–∞–ª.',
            'photo': 'img/character/character_3.png'
        }
    ] %}
{% endtry %}

<section class="who-we-are" id="who">
    <div class="who-we-are__bg" style="background-image: url('{{ url_for('static', filename='img/Who_am_I.jpg') }}');"></div>
    <div class="who-we-are__overlay"></div>
    <div class="container who-we-are__container">
        <h2 class="who-we-are__title">–ö—Ç–æ –º—ã</h2>
        
        <div class="who-we-are__carousel">
            <div class="portraits-carousel">
                {% for participant in participants %}
                <div class="portrait-slide {% if loop.first %}active{% endif %}">
                    <div class="portrait">
                        <div class="portrait__placeholder">
                            <img src="{{ url_for('static', filename=participant.photo) }}" alt="{{ participant.name }}">
                        </div>
                        <div class="portrait__quote">
                            <div class="portrait__name">{{ participant.name }}</div>
                            <div class="portrait__text">{{ participant.text }}</div>
                            <div class="portrait__story">{{ participant.story | replace('\n', '<br>') | safe }}</div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            {% if participants|length > 1 %}
            <!-- –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
            <div class="portraits-controls">
                <button class="portrait-nav portrait-prev" id="portraitPrev">&#8592;</button>
                <div class="portrait-dots">
                    {% for participant in participants %}
                    <span class="portrait-dot {% if loop.first %}active{% endif %}" data-slide="{{ loop.index0 }}"></span>
                    {% endfor %}
                </div>
                <button class="portrait-nav portrait-next" id="portraitNext">&#8594;</button>
            </div>
            {% endif %}
        </div>
    </div>
</section> 